# ğŸ—ï¸ TownTap Architecture & Structure

## ğŸ“± App Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APP LAUNCH                              â”‚
â”‚                    (Splash Screen)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Auth Check   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚
         â–¼                       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Not    â”‚           â”‚  Logged  â”‚
   â”‚ Logged   â”‚           â”‚    In    â”‚
   â”‚   In     â”‚           â”‚          â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚
        â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WELCOME    â”‚        â”‚   TAB NAV    â”‚
â”‚   SCREEN    â”‚        â”‚   (Main App) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â–¼                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    ROLE     â”‚               â”‚
â”‚  SELECTION  â”‚               â”‚
â”‚  (Customer/ â”‚               â”‚
â”‚   Business) â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
       â”‚                      â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”                 â”‚
   â”‚        â”‚                 â”‚
   â–¼        â–¼                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ SIGN   â”‚  â”‚ SIGN   â”‚        â”‚
â”‚  UP    â”‚  â”‚  IN    â”‚        â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
    â”‚           â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ  Home Screen Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘     GRADIENT HEADER               â•‘  â”‚
â”‚  â•‘  ğŸ‘‹ Hello, John                   â•‘  â”‚
â”‚  â•‘  Find services near you           â•‘  â”‚
â”‚  â•‘                          ğŸ””  ğŸ‘¤   â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘  â”‚
â”‚  â•‘  â”‚ ğŸ” Search for services...   â”‚ â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CATEGORIES                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”¨ â”‚ â”‚ ğŸ”§ â”‚ â”‚ âš¡ â”‚ â”‚ ğŸŒ± â”‚ â”‚ ğŸ›‹ï¸ â”‚   â”‚
â”‚  â”‚Car-â”‚ â”‚Plu-â”‚ â”‚Ele-â”‚ â”‚Gar-â”‚ â”‚Fur-â”‚   â”‚
â”‚  â”‚pen â”‚ â”‚mberâ”‚ â”‚ctr â”‚ â”‚den â”‚ â”‚nit â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NEARBY BUSINESSES                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [IMG] Joe's Carpentry        âœ“   â”‚  â”‚
â”‚  â”‚       â˜…â˜…â˜…â˜…â˜† 4.5 (25)  ğŸ“ 2.3km  â”‚  â”‚
â”‚  â”‚       Expert wood work...         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [IMG] QuickFix Plumbing          â”‚  â”‚
â”‚  â”‚       â˜…â˜…â˜…â˜…â˜… 4.9 (40)  ğŸ“ 3.1km  â”‚  â”‚
â”‚  â”‚       Fast & reliable...          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [IMG] BrightSpark Electric       â”‚  â”‚
â”‚  â”‚       â˜…â˜…â˜…â˜…â˜† 4.3 (18)  ğŸ“ 4.5km  â”‚  â”‚
â”‚  â”‚       Licensed electrician...     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ Project File Structure

```
TownTap/
â”‚
â”œâ”€â”€ ğŸ“± app/                    # Screens (Expo Router)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ” auth/               # Authentication
â”‚   â”‚   â”œâ”€â”€ sign-in.tsx       âœ… Login screen
â”‚   â”‚   â”œâ”€â”€ sign-up.tsx       âœ… Registration
â”‚   â”‚   â”œâ”€â”€ role-selection.tsx âœ… Role picker
â”‚   â”‚   â””â”€â”€ forgot-password.tsx â³ Password reset
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‘ (tabs)/             # Main app tabs
â”‚   â”‚   â”œâ”€â”€ _layout.tsx       âœ… Tab layout
â”‚   â”‚   â”œâ”€â”€ home.tsx          âœ… Business listings
â”‚   â”‚   â”œâ”€â”€ explore.tsx       â³ Search & filters
â”‚   â”‚   â”œâ”€â”€ bookings.tsx      â³ Order history
â”‚   â”‚   â””â”€â”€ profile.tsx       â³ User profile
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸª business/           # Business screens
â”‚   â”‚   â””â”€â”€ [id].tsx          â³ Business detail
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“… booking/            # Booking screens
â”‚   â”‚   â”œâ”€â”€ create.tsx        â³ Create booking
â”‚   â”‚   â””â”€â”€ track.tsx         â³ Live tracking
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ‘¤ profile/            # Profile screens
â”‚   â”‚   â”œâ”€â”€ edit.tsx          â³ Edit profile
â”‚   â”‚   â””â”€â”€ change-password.tsx â³ Password change
â”‚   â”‚
â”‚   â”œâ”€â”€ _layout.tsx           âœ… Root layout
â”‚   â””â”€â”€ welcome.tsx           âœ… Onboarding
â”‚
â”œâ”€â”€ ğŸ¨ components/             # Reusable components
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ button.tsx        âœ… Custom button
â”‚       â”œâ”€â”€ input.tsx         âœ… Custom input
â”‚       â”œâ”€â”€ business-card.tsx âœ… Business card
â”‚       â””â”€â”€ loading-screen.tsx âœ… Loader
â”‚
â”œâ”€â”€ ğŸ”§ lib/                    # Core libraries
â”‚   â”œâ”€â”€ supabase.ts           âœ… Supabase client
â”‚   â”œâ”€â”€ database.types.ts     âœ… TypeScript types
â”‚   â””â”€â”€ api.ts                âœ… API functions
â”‚
â”œâ”€â”€ ğŸ­ contexts/               # React contexts
â”‚   â””â”€â”€ auth-context.tsx      âœ… Auth state
â”‚
â”œâ”€â”€ ğŸ¨ constants/              # App constants
â”‚   â”œâ”€â”€ colors.ts             âœ… Color palette
â”‚   â”œâ”€â”€ spacing.ts            âœ… Spacing system
â”‚   â””â”€â”€ theme.ts              âœ… Theme config
â”‚
â”œâ”€â”€ ğŸ“š Documentation/
â”‚   â”œâ”€â”€ README.md             âœ… Main docs
â”‚   â”œâ”€â”€ SUPABASE_SETUP.md     âœ… Backend guide
â”‚   â”œâ”€â”€ IMPLEMENTATION_STATUS.md âœ… Progress
â”‚   â”œâ”€â”€ QUICK_START.md        âœ… Setup guide
â”‚   â””â”€â”€ DELIVERY_SUMMARY.md   âœ… This file
â”‚
â””â”€â”€ âš™ï¸ Config/
    â”œâ”€â”€ package.json          âœ… Dependencies
    â”œâ”€â”€ .env.example          âœ… Env template
    â”œâ”€â”€ app.json              âœ… Expo config
    â””â”€â”€ tsconfig.json         âœ… TypeScript config
```

## ğŸ—„ï¸ Database Schema Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   auth.users â”‚ (Supabase Auth)
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1:1
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    profiles     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ id (PK)      â”‚â—„â”€â”€â”
â”‚  â€¢ full_name    â”‚   â”‚ 1:M
â”‚  â€¢ phone        â”‚   â”‚
â”‚  â€¢ role         â”‚   â”‚
â”‚  â€¢ avatar_url   â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
        â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   businesses    â”‚         â”‚   bookings   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  â€¢ id (PK)      â”‚â—„â”€â”€â”€â”    â”‚ â€¢ id (PK)    â”‚
â”‚  â€¢ owner_id (FK)â”‚    â”‚1:M â”‚ â€¢ customer_idâ”‚
â”‚  â€¢ name         â”‚    â”‚    â”‚ â€¢ business_idâ”‚
â”‚  â€¢ category_id  â”‚    â”‚    â”‚ â€¢ service_id â”‚
â”‚  â€¢ address      â”‚    â”‚    â”‚ â€¢ status     â”‚
â”‚  â€¢ lat/lng      â”‚    â”‚    â”‚ â€¢ price      â”‚
â”‚  â€¢ avg_rating   â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ is_verified  â”‚    â”‚           â”‚ 1:1
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚           â–¼
         â”‚ 1:M         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼             â”‚    â”‚  locations   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚    services     â”‚   â”‚    â”‚ â€¢ booking_id â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚    â”‚ â€¢ lat/lng    â”‚
â”‚  â€¢ id (PK)      â”‚   â”‚    â”‚ â€¢ timestamp  â”‚
â”‚  â€¢ business_id  â”‚â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ title        â”‚
â”‚  â€¢ price        â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â€¢ duration     â”‚        â”‚   reviews    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
                           â”‚ â€¢ business_idâ”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â€¢ customer_idâ”‚
â”‚  categories  â”‚          â”‚ â€¢ rating     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚          â”‚ â€¢ comment    â”‚
â”‚ â€¢ id (PK)    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ name       â”‚
â”‚ â€¢ slug       â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ icon       â”‚          â”‚notifications â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
                          â”‚ â€¢ user_id    â”‚
                          â”‚ â€¢ title      â”‚
                          â”‚ â€¢ message    â”‚
                          â”‚ â€¢ read       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER     â”‚
â”‚  (Mobile)  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚ 1. User Action
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Native   â”‚
â”‚    Component    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 2. Call API Function
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   lib/api.ts     â”‚
â”‚  (API Functions) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 3. Supabase Query
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Client â”‚
â”‚  (lib/supabase)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 4. HTTP Request
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    SUPABASE      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚PostgreSQLâ”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   RLS    â”‚â—„â”€â”€â”¼â”€ 5. Security Check
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 6. Data Response
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TanStack Query  â”‚
â”‚    (Caching)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 7. Update UI
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React State   â”‚
â”‚   (Context API) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 8. Re-render
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER     â”‚
â”‚  Sees Data â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sign Up â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. User fills form
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Form Validationâ”‚
â”‚   (yup/react-  â”‚
â”‚   hook-form)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 2. Valid? â†’ Yes
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Call Auth API  â”‚
â”‚ supabase.auth  â”‚
â”‚ .signUp()      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 3. Create user
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Auth  â”‚
â”‚  Creates User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 4. Trigger fires
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auto-create    â”‚
â”‚  Profile Row    â”‚
â”‚  (via trigger)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 5. Return session
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Store Session  â”‚
â”‚  (Expo Secure   â”‚
â”‚   Store)        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 6. Update Context
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Context   â”‚
â”‚  Updates State  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 7. Navigation
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redirect to    â”‚
â”‚   Main App      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI Component Hierarchy

```
App
â”‚
â”œâ”€â”€ AuthProvider (Context)
â”‚   â”‚
â”‚   â””â”€â”€ QueryClientProvider (React Query)
â”‚       â”‚
â”‚       â””â”€â”€ Navigation
â”‚           â”‚
â”‚           â”œâ”€â”€ Welcome Stack
â”‚           â”‚   â”œâ”€â”€ Welcome Screen
â”‚           â”‚   â””â”€â”€ Auth Stack
â”‚           â”‚       â”œâ”€â”€ Role Selection
â”‚           â”‚       â”œâ”€â”€ Sign Up
â”‚           â”‚       â””â”€â”€ Sign In
â”‚           â”‚
â”‚           â””â”€â”€ Main Stack (After Auth)
â”‚               â”‚
â”‚               â”œâ”€â”€ Tab Navigator
â”‚               â”‚   â”œâ”€â”€ Home Tab
â”‚               â”‚   â”‚   â”œâ”€â”€ Header (Gradient)
â”‚               â”‚   â”‚   â”œâ”€â”€ Category Scroller
â”‚               â”‚   â”‚   â””â”€â”€ Business List
â”‚               â”‚   â”‚       â””â”€â”€ BusinessCard
â”‚               â”‚   â”‚           â”œâ”€â”€ Image
â”‚               â”‚   â”‚           â”œâ”€â”€ Rating Stars
â”‚               â”‚   â”‚           â””â”€â”€ Distance Badge
â”‚               â”‚   â”‚
â”‚               â”‚   â”œâ”€â”€ Explore Tab
â”‚               â”‚   â”œâ”€â”€ Bookings Tab
â”‚               â”‚   â””â”€â”€ Profile Tab
â”‚               â”‚
â”‚               â”œâ”€â”€ Modal Screens
â”‚               â”‚   â”œâ”€â”€ Business Detail
â”‚               â”‚   â”œâ”€â”€ Create Booking
â”‚               â”‚   â””â”€â”€ Live Tracking
â”‚               â”‚
â”‚               â””â”€â”€ Profile Stack
â”‚                   â”œâ”€â”€ Edit Profile
â”‚                   â””â”€â”€ Change Password
```

## ğŸ“Š State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      GLOBAL STATE               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AuthContext             â”‚ â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚
â”‚  â”‚   â€¢ session               â”‚ â”‚
â”‚  â”‚   â€¢ user                  â”‚ â”‚
â”‚  â”‚   â€¢ profile               â”‚ â”‚
â”‚  â”‚   â€¢ signIn()              â”‚ â”‚
â”‚  â”‚   â€¢ signUp()              â”‚ â”‚
â”‚  â”‚   â€¢ signOut()             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   TanStack Query          â”‚ â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚ â”‚
â”‚  â”‚   â€¢ categories (cached)   â”‚ â”‚
â”‚  â”‚   â€¢ businesses (cached)   â”‚ â”‚
â”‚  â”‚   â€¢ bookings (cached)     â”‚ â”‚
â”‚  â”‚   â€¢ Auto refetch          â”‚ â”‚
â”‚  â”‚   â€¢ Background updates    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LOCAL STATE                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  Component State (useState)     â”‚
â”‚  â€¢ Form inputs                  â”‚
â”‚  â€¢ Loading states               â”‚
â”‚  â€¢ Error messages               â”‚
â”‚  â€¢ Modal visibility             â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DEVELOPMENT                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Local machine                 â”‚
â”‚  â€¢ Expo Dev Server               â”‚
â”‚  â€¢ iOS Simulator / Android       â”‚
â”‚  â€¢ Supabase Dev Environment      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     TESTING                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ TestFlight (iOS)              â”‚
â”‚  â€¢ Internal Testing (Android)    â”‚
â”‚  â€¢ Supabase Staging              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     PRODUCTION                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    Mobile App              â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚ â”‚
â”‚  â”‚  â€¢ App Store (iOS)         â”‚ â”‚
â”‚  â”‚  â€¢ Play Store (Android)    â”‚ â”‚
â”‚  â”‚  â€¢ EAS Build & Submit      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    Backend                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚ â”‚
â”‚  â”‚  â€¢ Supabase (Hosted)       â”‚ â”‚
â”‚  â”‚  â€¢ PostgreSQL              â”‚ â”‚
â”‚  â”‚  â€¢ Edge Functions          â”‚ â”‚
â”‚  â”‚  â€¢ Storage Buckets         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    External Services       â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚ â”‚
â”‚  â”‚  â€¢ Stripe (Payments)       â”‚ â”‚
â”‚  â”‚  â€¢ Google Maps API         â”‚ â”‚
â”‚  â”‚  â€¢ Push Notifications      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Performance Optimizations

### Implemented
- âœ… **React Query Caching** - Reduces API calls
- âœ… **Database Indexes** - Fast queries
- âœ… **Component Memoization** - Prevents re-renders
- âœ… **Image Optimization** - Expo Image for caching
- âœ… **Lazy Loading** - Load data on demand

### Planned
- â³ **Virtual Lists** - For long business lists
- â³ **Code Splitting** - Smaller bundle size
- â³ **Offline Mode** - Local data persistence
- â³ **Background Sync** - Update data in background

---

**Visual guides help understand the complex system!** ğŸ¯

Refer to this document to understand how everything connects.
